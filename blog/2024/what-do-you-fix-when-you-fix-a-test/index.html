<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>What do you fix when you fix a test? | Joep Schuurkes</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../rss.xml">
<link rel="alternate" type="application/atom+xml" title="Atom" hreflang="en" href="../../feed.atom">
<link rel="canonical" href="https://smallsheds.garden/blog/2024/what-do-you-fix-when-you-fix-a-test/">
<link rel="icon" href="../../../assets/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" href="../../../assets/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" href="../../../assets/favicons/favicon-96x96.png" sizes="96x96">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><script defer data-domain="j19sch.github.io" src="https://plausible.io/js/plausible.js"></script><meta name="author" content="Joep Schuurkes">
<link rel="prev" href="../the-difference-between-a-test-case-and-a-requirement-is-the-moment-of-discovery/" title="The difference between a test case and a requirement is the moment of discovery" type="text/html">
<link rel="next" href="../the-fluxx-ensemble-exercise/" title="The Fluxx ensemble exercise" type="text/html">
<meta property="og:site_name" content="Joep Schuurkes">
<meta property="og:title" content="What do you fix when you fix a test?">
<meta property="og:url" content="https://smallsheds.garden/blog/2024/what-do-you-fix-when-you-fix-a-test/">
<meta property="og:description" content="You ran the tests1 - or a pipeline did it for you - and some of them failed. Time to fix the tests! But what is it exactly that needs fixing?
There are quite a few things that might make a test fail:
">
<meta property="og:image" content="https://smallsheds.garden/images/default-preview.jpeg">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-08-25T00:00:00+02:00">
<meta property="article:tag" content="coverage">
<meta property="article:tag" content="quality engineering">
<meta property="article:tag" content="software testing">
<meta property="article:tag" content="test automation">
<meta property="article:tag" content="test strategy">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../../">

            <span id="blog-title">Joep Schuurkes</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../../index.html" class="nav-link">Home</a>
                </li>
<li class="nav-item">
<a href="../../../my-projects/" class="nav-link">Projects</a>
                </li>
<li class="nav-item">
<a href="../../../my-talks/" class="nav-link">Talks</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Lists</a>
            <div class="dropdown-menu">
                    <a href="../../../my-lists/reading-list/" class="dropdown-item">Reading list</a>
                    <a href="../../../my-lists/recommended-reading/" class="dropdown-item">Recommended reading</a>
                    <a href="../../../my-lists/favorite-podcasts/" class="dropdown-item">Favorite podcasts</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Blog</a>
            <div class="dropdown-menu">
                    <a href="../../" class="dropdown-item">My blog</a>
                    <a href="../../../categories/" class="dropdown-item">Categories and tags</a>
                    <a href="../../../archive.html" class="dropdown-item">Archive</a>
                    <a href="../../rss.xml" class="dropdown-item"><span class="caps">RSS</span> feed</a>
                    <a href="../../feed.atom" class="dropdown-item">Atom feed</a>
            </div>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">What do you fix when you fix a&nbsp;test?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Joep&nbsp;Schuurkes
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2024-08-25T00:00:00+02:00" itemprop="datePublished" title="25 August 2024">25 August 2024</time></a>
            </p>
            
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>You ran the tests<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> - or a pipeline did it for you - and some of them failed. Time to fix the tests! But what is it exactly that needs&nbsp;fixing?</p>
<p>There are quite a few things that might make a test&nbsp;fail:</p>
<ol>
<li>an issue with the&nbsp;build</li>
<li>an issue with the pipeline (if that&#8217;s where the test&nbsp;runs)</li>
<li>an issue in the environment the code under test is running&nbsp;on</li>
<li>an issue in the environment the test code is running&nbsp;on</li>
<li>a bug in the code under&nbsp;test</li>
<li>a mistake in the test&nbsp;code</li>
<li>a mistake in what the test should&nbsp;test</li>
</ol>
<p>Arguably, on the last three describe a test that fails. The test did its job detecting a problem. In the first four we didn&#8217;t even get that far. The issues prevented the test from doing its job. So in those cases, it&#8217;s not the test(s) as such that need&nbsp;fixing.</p>
<!-- TEASER_END -->

<p>Which leaves with the last three in the list. If a test finds a bug in the code under test, great! Fix the bug. If there&#8217;s a programming mistake in the test, great! Fix the mistake. But what if the test isn&#8217;t testing what it should be testing? What if there&#8217;s a problem with the test design? Simple, fix the&nbsp;test!</p>
<h2>The challenge of fixing&nbsp;tests</h2>
<p>Ideally, that is indeed what happens. You read the failing test. You understand why it exists and what it is supposed to test. So you update the test based on that understanding, and make it pass again. And perhaps you even look at the surrounding tests and make some changes in those as well. And you might even add a few more&nbsp;tests.</p>
<p>Unfortunately, often enough that&#8217;s not what happens. Especially when tests fail at an inconvenient&nbsp;time.</p>
<p>You think you&#8217;re done. You&#8217;ve written the code. You&#8217;ve done some exploratory testing. You&#8217;ve written the tests. They pass. And then either on your local machine or in the pipeline, you run all the tests. And some of them fail. You thought you were done, but turns out you&#8217;re&nbsp;not.</p>
<p>At that time it&#8217;s very tempting to look at the failing tests and simply fix the assertion that&#8217;s failing. You look at the actual result reported by the test runner, think &#8220;yeah that looks right&#8221;, and update the test to assert on the actual result. And often enough, that&#8217;s fine. That is the right way to handle&nbsp;it.</p>
<p>But sometimes it&#8217;s not. The test loses something: some coverage, some clarity of intention. The test loses some of its value. And after that has happened a few times, it&#8217;s really not that good a test anymore. It still provides enough value that you don&#8217;t want to delete it, but it&#8217;s not very clear anymore either what the test is supposed to be testing. And how in combination with its surrounding tests, provides sufficient coverage of the thing being&nbsp;tested.</p>
<p>That test is now a legacy&nbsp;test.</p>
<h2>The trap of legacy&nbsp;tests</h2>
<p>Legacy tests are a sub-set of legacy code: code that you can&#8217;t throw away, but wish would be different. Or as <a href="https://www.linkedin.com/in/angel-siendones-sillero">√Ångel Siendones Sillero</a> put&nbsp;it:</p>
<blockquote>
<p>Legacy code is often defined as &#8220;code that makes more design decisions than the team working on it&#8221;.<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup></p>
</blockquote>
<p>Translated to legacy tests: the existing tests are making more decisions about what and how things are tested than the&nbsp;team.</p>
<p>So how do you avoid this trap of legacy tests? I&#8217;m not going to claim I have the full answer, but I do have three&nbsp;suggestions.</p>
<h3>Tests-as-code and&nbsp;tests-as-tests</h3>
<p>First of all, it&#8217;s helpful to <a href="../../2019/how-this-tester-writes-code/#tests-as-code-vs-tests-as-tests">distinguish tests-as-code and tests-as-tests</a>. When you&#8217;re thinking about tests as tests-as-tests, you&#8217;re thinking about the information the tests can give you about the code or application under test. When you&#8217;re thinking about tests as tests-as-code, you&#8217;re thinking about how you can get the test code to do what you want it to&nbsp;do.</p>
<p>Especially when tests fail at an inconvenient time, it&#8217;s tempting to only treat them as code. What changes to the test&#8217;s code do you need to make, to make it pass? That&#8217;s when it&#8217;s time to take a step back and look at the test from the other perspective: what information is this test supposed to provide and how do I make sure it keeps doing&nbsp;so?</p>
<h3>Clarity of&nbsp;intention</h3>
<p>Asking (and answering) that question is a lot easier when your tests clearly express their intention. What exactly is each test trying to test? You do this by giving tests clear names, separating setup and teardown code from the actual test, and by being deliberate in how you group tests together. It might also mean being a little less smart in your code, making it as easy as possible to read - even if it&#8217;s at the expense of some&nbsp;maintainability.</p>
<h3>Ongoing&nbsp;conversations</h3>
<p>Last but not least, you need to have an ongoing conversation within your team about your <a href="../../2019/test-strategy-primer/">testing strategy</a>. What do you want to test, why, where, and how? Even though you want to make your test code as expressive as possible, you can&#8217;t do this through code alone. You need conversations, because code can never express itself fully. As Peter Naur wrote in his article &#8220;Programming as Theory Building&#8221; (1985)<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>:</p>
<blockquote>
<p>In terms of Ryle‚Äôs notion of theory, what has to be built by the programmer is a theory of how certain affairs of the world will be handled by, or supported by, a computer program. On the Theory Building View of programming the theory built by the programmers has primacy over such other products as program texts, user documentation, and additional documentation such as&nbsp;specifications.</p>
</blockquote>
<p>The only way to have a true shared understanding about the tests, is to have conversations about the tests. So that when there&#8217;s a mistake in what the test should test, you don&#8217;t only fix the test-as-code, you fix the test-as-test as&nbsp;well.</p>
<hr>
<p>Have you encountered legacy tests? What are some of the signs you look out for? And what are your favorite ways to deal with legacy&nbsp;tests?</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>I&#8217;m using the word test here in the way developers tend to use it: a test is a piece of code. In a different context I might use it differently and say: a test is a performance. As Wittgenstein said: meaning is use.¬†<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">‚Ü©</a></p>
</li>
<li id="fn:2">
<p>Which to be fair, was only the lead up to <a href="https://www.linkedin.com/posts/angel-siendones-sillero_legacy-code-is-often-defined-as-code-that-activity-7145457617526538240-nvRS/">their actual point</a>: Could we define a legacy process as &#8220;one that makes more decisions on how a team functions than the team itself&#8221;? ü§î¬†<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">‚Ü©</a></p>
</li>
<li id="fn:3">
<p>I only discovered this article because Alistair Cockburn included it in <a href="https://gwern.net/doc/cs/algorithm/1985-naur.pdf">Appendix B</a> of his excellent book &#8220;Agile Software Development&#8221;.¬†<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">‚Ü©</a></p>
</li>
</ol>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/coverage/" rel="tag">coverage</a></li>
            <li><a class="tag p-category" href="../../../categories/quality-engineering/" rel="tag">quality&nbsp;engineering</a></li>
            <li><a class="tag p-category" href="../../../categories/software-testing/" rel="tag">software&nbsp;testing</a></li>
            <li><a class="tag p-category" href="../../../categories/test-automation/" rel="tag">test&nbsp;automation</a></li>
            <li><a class="tag p-category" href="../../../categories/test-strategy/" rel="tag">test&nbsp;strategy</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../the-difference-between-a-test-case-and-a-requirement-is-the-moment-of-discovery/" rel="prev" title="The difference between a test case and a requirement is the moment of discovery">Previous&nbsp;post</a>
            </li>
            <li class="next">
                <a href="../the-fluxx-ensemble-exercise/" rel="next" title="The Fluxx ensemble exercise">Next&nbsp;post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents ¬© 2024 
<a href="https://creativecommons.org/licenses/by/4.0/" rel="nofollow" target="_blank">
<img alt="Creative Commons License" style="border-width:0;margin: 0px 0px 0px 0px" src="https://licensebuttons.net/l/by/4.0/80x15.png"></a>
<a href="mailto:site@joep.slmail.me">Joep Schuurkes</a> - Powered by <a href="https://getnikola.com" rel="nofollow" target="_blank">Nikola</a> - Analytics by <a href="https://plausible.io/" rel="nofollow" target="_blank">Plausible</a>
            
        </footer>
</div>
</div>

        <script src="../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>