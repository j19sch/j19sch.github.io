<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>(clj 6) Three chapters in one year | Joep Schuurkes</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="alternate" type="application/atom+xml" title="Atom" hreflang="en" href="../../../feed.atom">
<link rel="canonical" href="https://j19sch.github.io/blog/clojure/2021/clj6-three-chapters-in-one-year/">
<link rel="icon" href="../../../../assets/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" href="../../../../assets/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" href="../../../../assets/favicons/favicon-96x96.png" sizes="96x96">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101252313);</script><script async src="//static.getclicky.com/js"></script><meta name="author" content="Joep Schuurkes">
<link rel="prev" href="../../../2021/an-approach-to-teaching-agile-20-years-after-the-agile-manifesto/" title="An approach to teaching Agile 20 years after the Agile Manifesto" type="text/html">
<link rel="next" href="../../../2021/two-times-remote-elephant-carpaccio/" title="Two times remote Elephant Carpaccio" type="text/html">
<meta property="og:site_name" content="Joep Schuurkes">
<meta property="og:title" content="(clj 6) Three chapters in one year">
<meta property="og:url" content="https://j19sch.github.io/blog/clojure/2021/clj6-three-chapters-in-one-year/">
<meta property="og:description" content="It's been a bit more than a year since I posted my first blog post about learning Clojure. And it's been five months since my last blog post about it. So far I've made it through the first three chapt">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-05-08T10:53:25+02:00">
<meta property="article:tag" content="brave clojure">
<meta property="article:tag" content="clojure">
<meta property="article:tag" content="programming">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../../../">

            <span id="blog-title">Joep Schuurkes</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../../../index.html" class="nav-link">Home</a>
                </li>
<li class="nav-item">
<a href="../../../../my-projects/" class="nav-link">Projects</a>
                </li>
<li class="nav-item">
<a href="../../../../my-talks/" class="nav-link">Talks</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Lists</a>
            <div class="dropdown-menu">
                    <a href="../../../../my-lists/reading-list/" class="dropdown-item">Reading list</a>
                    <a href="../../../../my-lists/recommended-reading/" class="dropdown-item">Recommended reading</a>
                    <a href="../../../../my-lists/favorite-podcasts/" class="dropdown-item">Favorite podcasts</a>
                    <a href="../../../../my-lists/fountain-pens/" class="dropdown-item">Fountain pens</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Blog</a>
            <div class="dropdown-menu">
                    <a href="../../../" class="dropdown-item">My blog</a>
                    <a href="../../../../categories/" class="dropdown-item">Categories and tags</a>
                    <a href="../../../../archive.html" class="dropdown-item">Archive</a>
                    <a href="../../../rss.xml" class="dropdown-item">RSS feed</a>
                    <a href="../../../feed.atom" class="dropdown-item">Atom feed</a>
            </div>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">(clj 6) Three chapters in one year</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Joep Schuurkes
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2021-05-08T10:53:25+02:00" itemprop="datePublished" title="8 May 2021">8 May 2021</time></a>
            </p>
            
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>It's been a bit more than a year since I posted my <a href="../../2020/clj0-diving-straight-in/">first blog post</a> about learning Clojure. And it's been five months since my <a href="clj5-loop-and-recur-into-and-conj">last blog post</a> about it. So far I've made it through the first three chapters<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> of "<a href="https://www.braveclojure.com/clojure-for-the-brave-and-true/">Clojure for the Brave and True</a>". Instead of commenting on my learning pace at the start of every post, I've decided that this pace is the pace that works for me at this time, so there's no need to keep revisiting the topic.</p>
<p>Something I do want to mention is that one thing that triggered me to do some more Clojure was <a href="https://itrevolution.com/the-idealcast-episode-10/">this episode</a> of Gene Kim's excellent <a href="https://itrevolution.com/the-idealcast-podcast/">Idealcast</a> podcast with <a href="https://www.michaelnygard.com/">Michael Nygard</a>, in which they spend some time talking about Clojure.</p>
<h3>Vim macros</h3>
<p>The exercises at the end of chapter 3 got me to try out a lot of things, so I got bored having to type in the commands to copy a line (<code>yy</code>), paste it (<code>p</code>), replace it by its evaluation (<code>c!$</code>), comment it out (<code>gcc</code>), and add a "<code>=&gt;</code>" to mark it as output. So I learned about Vim macros and recorded that sequence to run when I hit <code>@c</code>. At the end of my <a href="../../../../">(clj 4)</a> post I mentioned I might have to do this. Guess that moment came sooner than I expected.</p>
<!-- TEASER_END -->

<p>The macro works great as long as you don't try to evaluate a line that throws an exception. You do get the same weird line of output every time (i.e. <code>a =&gt;</code>), so it's easy enough to recognize. Wondering if and how Vim macros are stored, I was glad to discover they are stored automatically if you run Vim in noncompatible mode (which I do). So I haven't bothered yet to store the macro in my <code>.vimrc</code> with the <code>let</code> command.</p>
<h3>Exercise 1 - using some functions</h3>
<p>The first exercise asks you to use the <code>str</code>, <code>vector</code>, <code>list</code>, <code>hash-map</code>, and <code>hash-set</code> functions. I remembered to hit <code>shift+k</code> to read the documentation on <code>str</code> and that reminded me to try using these functions with different numbers of arguments:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="nf">str</span><span class="p">)</span> 
<span class="c1">; =&gt; ""</span>
<span class="p">(</span><span class="nb">str </span><span class="mi">1</span><span class="p">)</span>
<span class="c1">; =&gt; "1" </span>
<span class="p">(</span><span class="nb">str </span><span class="mi">1</span> <span class="s">"a"</span><span class="p">)</span>
<span class="c1">; =&gt; "1a"</span>
</code></pre>

<p>I'm still amazed by this behavior. It gives me a feeling of simplicity and clarity.</p>
<h4>Lists and list literals</h4>
<p>One problem I ran into is applying those functions on a list:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="nb">str </span><span class="mi">1</span> <span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">))</span> 
<span class="c1">; ClassCastException class java.lang.Long cannot be cast to class clojure.lang.IFn</span>
</code></pre>

<p>Luckily, I wanted to double-check I was using the word "list" correctly in this blog post, which led me to the Clojure documentation on <a href="https://clojure.org/guides/learn/sequential_colls#_lists">lists</a> and to the solution<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>. Lists are evaluated by invoking the first element as a function, so you need to quote it to prevent evaluation:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="nb">str </span><span class="mi">1</span> <span class="o">'</span><span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>
<span class="c1">; =&gt; "1(2 3)"</span>
</code></pre>

<h4>Non-keywords as keys in hash maps</h4>
<p>Using the <code>hash-map</code> function had me wonder why the book consistenly uses keywords (e.g. <code>:name</code>) as the key in a hash map and not something else like a string or an integer. So I tried it out:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="nb">hash-map </span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">; =&gt; {1 2}</span>
<span class="p">(</span><span class="nb">hash-map </span><span class="ss">:1</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">; =&gt; {:1 2}</span>
<span class="p">(</span><span class="nb">hash-map </span><span class="s">"a"</span> <span class="s">"b"</span><span class="p">)</span>
<span class="c1">; =&gt; {"a" "b"}</span>
</code></pre>

<p>Seems to work just fine, right? But then I remembered there are different ways to retrieve something from a hash map, so I tried those out.</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="k">def </span><span class="nv">my-hash</span> <span class="p">(</span><span class="nb">hash-map </span><span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>

<span class="nv">my-hash</span>
<span class="c1">; =&gt; {1 2}</span>
<span class="p">(</span><span class="nf">my-hash</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1">; =&gt; 2</span>
<span class="p">(</span><span class="nb">get </span><span class="nv">my-hash</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1">; =&gt; 2</span>
<span class="p">(</span><span class="mi">1</span> <span class="nv">my-hash</span><span class="p">)</span>
<span class="c1">; ClassCastException class java.lang.Long cannot be cast to class clojure.lang.IFn</span>
</code></pre>

<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="k">def </span><span class="nv">my-other-hash</span> <span class="p">(</span><span class="nb">hash-map </span><span class="ss">:1</span> <span class="mi">2</span><span class="p">))</span>

<span class="nv">my-other-hash</span>
<span class="c1">; =&gt; {:1 2}</span>
<span class="p">(</span><span class="ss">:1</span> <span class="nv">my-other-hash</span><span class="p">)</span>
<span class="c1">; =&gt; 2</span>
</code></pre>

<p>In <a href="../../2020/clj4-learning-when-maps-closures/">(clj 4)</a> I mentioned I was surprised about the three different ways to get a value from a map in Clojure. I don't think the example above explains why there's three, but it does show that by using keywords as keys in hash maps, at least you keep your options open.</p>
<h3>Exercise 2 - writing a simple function</h3>
<p>Exercise 2 asks you to write function that takes a number and adds 100 to it. It had me think briefly if I should write <code>(+ 100 number)</code> or <code>(+ number 100)</code>. The former made more sense to me. I'm doing <code>+ 100</code> to the number rather than <code>+</code> the number to <code>100</code>, but that might just be how my mind works.</p>
<h4>Arity overloading</h4>
<p>I ended up with this function:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">plus-100-arity-overloading</span>
  <span class="s">" add 100 to a number; return 100 if no argument given"</span>
  <span class="p">([</span><span class="nv">number</span><span class="p">]</span>
    <span class="p">(</span><span class="nb">+ </span><span class="mi">100</span> <span class="nv">number</span><span class="p">))</span>
  <span class="p">([]</span>
    <span class="p">(</span><span class="nf">plus-100-arity-overloading</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">)</span>
</code></pre>

<p>As you can see, inspired by some of the functions from Exercise 1, I used arity overloading so that if you call the function without any arguments, it returns <code>100</code>. In my first version I returned <code>100</code> directly if the function was called withour arguments. After checking the section about arity overloading in the book, I realized that you want the function to call itself, filling in the omitted argument (<code>number</code> in this case). Not that it doesn't work if you don't, but you could get some unexpected behaviors:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">plus-100-messed-up</span>
  <span class="p">([]</span>
   <span class="s">"one hundred"</span><span class="p">)</span>
  <span class="p">([</span><span class="nv">number</span><span class="p">]</span>
   <span class="p">(</span><span class="nb">+ </span><span class="mi">100</span> <span class="nv">number</span><span class="p">)</span>
   <span class="p">)</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nf">plus-100-messed-up</span><span class="p">)</span>
<span class="c1">; =&gt; "one hundred"</span>
<span class="p">(</span><span class="nf">plus-100-messed-up</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1">; =&gt; 100</span>
</code></pre>

<h3>Exercise 3 - change the function inc-maker to dec-maker</h3>
<p>Exercise 3 wants you to take the <code>inc-maker</code> function shown earlier in the chapter and change it into a <code>dec-maker</code>. That's easy enough: copy-paste the <code>inc-maker</code>, rename it, and change a <code>+</code> into a <code>-</code>:<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup></p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="kd">defn </span><span class="nv">dec-maker</span>
  <span class="p">[</span><span class="nv">dec-by</span><span class="p">]</span>
  <span class="o">#</span><span class="p">(</span><span class="nb">- </span><span class="nv">%</span> <span class="nv">dec-by</span><span class="p">))</span>

<span class="p">(</span><span class="k">def </span><span class="nv">dec9</span> <span class="p">(</span><span class="nf">dec-maker</span> <span class="mi">9</span><span class="p">))</span>

<span class="p">(</span><span class="nf">dec9</span> <span class="mi">10</span><span class="p">)</span>
<span class="c1">; =&gt; 1</span>
</code></pre>

<h4>Revisiting the concept of closures</h4>
<p>However, the book shows you the <code>inc-maker</code> function to illustrate how a returned function is a "closure". And as you can read in <a href="../../../../">(clj 4)</a>, I did not understand the explanation, when I first came across it. Since it still bugged me that I don't understand, I decided to give it another try.</p>
<p>The explanation in the book is as follows:</p>
<blockquote>
<p>By now you’ve seen that functions can return other functions. The returned functions are <em>closures</em>, which means that they can access all the variables that were in scope when the function was created.</p>
<p>Here, <code>inc-by</code> is in scope, so the returned function has access to it even when the returned function is used outside <code>inc-maker</code>.</p>
</blockquote>
<p>What I noticed back then and re-noticed just now is that <code>inc-maker</code> and <code>dec-maker</code> are defined with <code>defn</code>, so as a function. However, <code>inc3</code> from the book and <code>dec9</code> from the exercise (see above) are defined with <code>def</code>, which is used to bind a name to a value. So I checked the <a href="https://clojuredocs.org/clojure.core/defn">Clojure documentation on <code>defn</code></a> and it says <code>defn</code> is the same as <code>(def name (fn [params* ] exprs*))</code>:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="k">def </span><span class="nv">def-dec9</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">num</span><span class="p">]</span> <span class="p">(</span><span class="nb">- </span><span class="nv">num</span> <span class="mi">9</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">def-dec9</span> <span class="mi">10</span><span class="p">)</span>
<span class="c1">; =&gt; 1</span>
</code></pre>

<p>So that's a different syntax from the <code>inc-maker</code>/<code>dec-maker</code> example. Using Clojure's <a href="https://clojuredocs.org/clojure.core/type"><code>type</code></a> confirms this difference, but I have no idea what it means exactly:</p>
<pre class="code literal-block"><span></span><code><span class="p">(</span><span class="nf">type</span> <span class="nv">dec9</span><span class="p">)</span>
<span class="c1">; =&gt; clojure_noob.core$dec_maker$fn__1458</span>

<span class="p">(</span><span class="nf">type</span> <span class="nv">def-dec9</span><span class="p">)</span>
<span class="nv">=&gt;</span> <span class="nv">clojure_noob.core$def_dec9</span>
</code></pre>

<p>Having revisited all of this, the concept "closures" of does make a little more sense to me, although I still wouldn't be able to really explain it. I did a search in the book and "closure" occurs twice: once in the explanation of <code>inc-maker</code> and once in the index. So I should be fine with my current understanding - or my lack thereof.</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>I've only done the first three exercises at the end of chapter 3, but the authors said it's fine to skip the other three exercises and revisit them after chapters 4 and 5. I tried solving exercise 4 for a bit and decided it's better to skip and revisit. <a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>I checked the explanation on lists in "Clojure for the Brave and True". It does tell you to use the single quote, but it also says the explanation won't be covered until Chapter 7. <a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:3">
<p>Which got me curious about providing more than two arguments to the <code>-</code> function. Turns out it works as you'd expect. <code>(- 10 1 2)</code> gives you 7. <code>(- 10 1 -2)</code> gives you 11. <code>(- 10 -1 2)</code> gives you 9.<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup> <a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:4">
<p>Turns out code blocks do not work in footnotes, but footnotes in footnotes do. <a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
</ol>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../categories/brave-clojure/" rel="tag">brave clojure</a></li>
            <li><a class="tag p-category" href="../../../../categories/clojure/" rel="tag">clojure</a></li>
            <li><a class="tag p-category" href="../../../../categories/programming/" rel="tag">programming</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../../2021/an-approach-to-teaching-agile-20-years-after-the-agile-manifesto/" rel="prev" title="An approach to teaching Agile 20 years after the Agile Manifesto">Previous post</a>
            </li>
            <li class="next">
                <a href="../../../2021/two-times-remote-elephant-carpaccio/" rel="next" title="Two times remote Elephant Carpaccio">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2021     
<a href="http://creativecommons.org/licenses/by/4.0/">
<img alt="Creative Commons License" style="border-width:0;margin: 0px 0px 0px 0px" src="https://i.creativecommons.org/l/by/4.0/80x15.png"></a>
    <a href="mailto:j19sch@hey.com">Joep Schuurkes</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>
            
        </footer>
</div>
</div>

        <script src="../../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>
