<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>(clj 7) Programming to abstractions with sequence functions | Joep Schuurkes</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="alternate" type="application/atom+xml" title="Atom" hreflang="en" href="../../../feed.atom">
<link rel="canonical" href="https://smallsheds.garden/blog/clojure/2021/clj7-programming-to-abstractions-with-sequence-functions/">
<link rel="icon" href="../../../../assets/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" href="../../../../assets/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" href="../../../../assets/favicons/favicon-96x96.png" sizes="96x96">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><script defer data-domain="j19sch.github.io" src="https://plausible.io/js/plausible.js"></script><meta name="author" content="Joep Schuurkes">
<link rel="prev" href="../../../2021/how-to-run-a-remote-elephant-carpaccio/" title="How to run a remote Elephant Carpaccio" type="text/html">
<link rel="next" href="../../../2021/site-analytics-if-you-have-two-watches/" title="Site analytics: if you have two watches..." type="text/html">
<meta property="og:site_name" content="Joep Schuurkes">
<meta property="og:title" content="(clj 7) Programming to abstractions with sequence functions">
<meta property="og:url" content="https://smallsheds.garden/blog/clojure/2021/clj7-programming-to-abstractions-with-sequence-functions/">
<meta property="og:description" content="Looking at my progress so far, I realized it's time re-evaluate this whole learning Clojure-thing. After looking through the table of contents of &quot;Clojure for the Brave and True&quot; and giving it some th">
<meta property="og:image" content="https://smallsheds.garden/images/default-preview.jpeg">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-12-05T13:40:36+01:00">
<meta property="article:tag" content="brave clojure">
<meta property="article:tag" content="clojure">
<meta property="article:tag" content="programming">
<meta property="article:tag" content="python">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="../../../../">

            <span id="blog-title">Joep Schuurkes</span>
        </a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav"></ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../../../index.html" class="nav-link">Home</a>
                </li>
<li class="nav-item">
<a href="../../../../my-projects/" class="nav-link">Projects</a>
                </li>
<li class="nav-item">
<a href="../../../../my-talks/" class="nav-link">Talks</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Lists</a>
            <div class="dropdown-menu">
                    <a href="../../../../my-lists/reading-list/" class="dropdown-item">Reading list</a>
                    <a href="../../../../my-lists/recommended-reading/" class="dropdown-item">Recommended reading</a>
                    <a href="../../../../my-lists/favorite-podcasts/" class="dropdown-item">Favorite podcasts</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Blog</a>
            <div class="dropdown-menu">
                    <a href="../../../" class="dropdown-item">My blog</a>
                    <a href="../../../../categories/" class="dropdown-item">Categories and tags</a>
                    <a href="../../../../archive.html" class="dropdown-item">Archive</a>
                    <a href="../../../rss.xml" class="dropdown-item"><span class="caps">RSS</span> feed</a>
                    <a href="../../../feed.atom" class="dropdown-item">Atom feed</a>
            </div>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">(clj 7) Programming to abstractions with sequence&nbsp;functions</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Joep&nbsp;Schuurkes
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2021-12-05T13:40:36+01:00" itemprop="datePublished" title="5 December 2021">5 December 2021</time></a>
            </p>
            
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Looking at my progress so far, I realized it&#8217;s time re-evaluate this whole learning Clojure-thing. After looking through the table of contents of &#8220;<a href="https://www.braveclojure.com/">Clojure for the Brave and True</a>&#8221; and giving it some thought, I decided to make two changes to how I&#8217;ll&nbsp;proceed:</p>
<ul>
<li>I will start writing shorter posts and write them more&nbsp;often.</li>
<li>My goal is to finish <em>&#8220;Part <span class="caps">II</span>: Language Fundamentals&#8221;</em>. I don&#8217;t have to do <em>&#8220;Part <span class="caps">III</span>: Advanced Topics&#8221;</em>.</li>
</ul>
<p>Completing Part <span class="caps">II</span> will still take quite some work. I&#8217;ve worked through the two first sections of chapter 4 (5 sections left in that chapter) and Part <span class="caps">II</span> goes up to chapter 8. So no time to waste: let&#8217;s take a look at sequence functions and programming to&nbsp;abstractions.</p>
<!-- TEASER_END -->

<h3>Programming to&nbsp;abstractions</h3>
<p>Sequence functions are functions such&nbsp;as <code>map</code>, <code>filter</code>,&nbsp;and <code>reduce</code> that work on anything that Clojure considers to be a sequence. In practice those sequences will be lists, vectors, sets, or maps. They could be other data structures, though, since the only thing Clojure cares about is that the data structure responds to the&nbsp;functions <code>first</code>, <code>rest</code>,&nbsp;and <code>cons</code>. <code>first</code> returns the first item of a&nbsp;sequence. <code>rest</code> returns everything after the first&nbsp;item. <code>cons</code> adds a new item to the beginning of the sequence (or rather: it returns a new sequence).<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></p>
<p>This way of doing things is called programming to abstractions. And apparently it’s a central tenet of Clojure philosophy. Luckily I was familiar with this concept (not with the name though) from Python and its <a href="https://rszalski.github.io/magicmethods/">magic methods</a><sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>.</p>
<p>In Python you can use&nbsp;the <code>+</code> operator on several data structures, but not on all of&nbsp;them:</p>
<div class="code"><pre class="code literal-block"><span class="o">&gt;&gt;&gt;</span> <span class="s2">"a"</span> <span class="o">+</span> <span class="s2">"b"</span>
<span class="s1">'ab'</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span>
<span class="mi">3</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2</span><span class="p">,)</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s2">"a"</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span> <span class="o">+</span> <span class="p">{</span><span class="s2">"b"</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">+</span><span class="p">:</span> <span class="s1">'dict'</span> <span class="ow">and</span> <span class="s1">'dict'</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span> <span class="o">+</span> <span class="p">{</span><span class="mi">2</span><span class="p">}</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">"&lt;stdin&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">operand</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">for</span> <span class="o">+</span><span class="p">:</span> <span class="s1">'set'</span> <span class="ow">and</span> <span class="s1">'set'</span>
</pre></div>

<p>If <code>+</code> works or not, depends on the data structure having implemented the magic&nbsp;method <code>__add__(self, other)</code>. And yes, that means you can create your own custom class,&nbsp;implement <code>__add__</code> for it and&nbsp;then <code>+</code> two instances of it<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>. </p>
<h3>Sequence&nbsp;functions</h3>
<p>After explaining the idea of programming to abstractions, the Brave and True-book goes through a list of functions that rely on Clojure’s sequence&nbsp;abstraction: <code>map</code>, <code>reduce</code>, <code>take</code>, <code>drop</code>, <code>take-while</code>, <code>drop-while</code>, <code>filter</code>, <code>some</code>, <code>sort</code>, <code>sort-by</code>,&nbsp;and <code>concat</code>. I&#8217;m not going to cover all of these; I will just share some notes I made&nbsp;on <code>map</code> and <code>drop-while</code>/<code>take-while</code>.</p>
<h4>
<code>map</code> works either&nbsp;way</h4>
<p>The most obvious usage of&nbsp;the <code>map</code> function is to apply a function to a sequence of&nbsp;items:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="nb">map str </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">])</span>
<span class="c1">; =&gt; ("1" "2" "3")</span>
</pre></div>

<p>Applying it to multiple sequences works as&nbsp;well:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="nb">map str </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="p">])</span>
<span class="c1">; =&gt; ("16" "27" "38")</span>

<span class="p">(</span><span class="nb">map str </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="p">])</span>
<span class="c1">; =&gt; ("16" "27" "38")</span>

<span class="p">(</span><span class="nb">map str </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="mi">9</span><span class="p">])</span>
<span class="c1">; =&gt; ("16" "27" "38")</span>
</pre></div>

<p>However, instead of applying a function to one or more sequences, you can also do it the other way&nbsp;around:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nf">%</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="nb">str </span><span class="nv">+</span><span class="p">])</span>
<span class="c1">; =&gt; ("123" 6)</span>
</pre></div>

<p><code>"123"</code> is the result of&nbsp;applying <code>str</code> to <code>1 2 3</code> and <code>6</code> is the result of&nbsp;applying <code>+</code> to <code>1 2 3</code>. Although this result is the other way around - as if&nbsp;we <code>map</code>ped two functions to a sequence of data -, syntactically that&#8217;s not the&nbsp;case. <code>#(% 1 2 3)</code> is a function (an anonymous one)&nbsp;and <code>[str +]</code> is a sequence. To illustrate, here&#8217;s the first example but rewritten with this&nbsp;syntax:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="nb">map </span><span class="o">#</span><span class="p">(</span><span class="nb">str </span><span class="nv">%</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">])</span>
<span class="c1">; =&gt; ("1" "2" "3")</span>
</pre></div>

<p>I think that&#8217;s a really cool feature of&nbsp;Clojure.</p>
<h4>
<code>drop-while</code> before <code>take-while</code> or the other way&nbsp;around?</h4>
<p>After&nbsp;explaining <code>take-while</code> (take items from a sequence while a condition is true)&nbsp;and <code>drop-while</code> (drop items from a sequence while a condition is true), the book shares an example of how to use the two together. After making it work on a vector of numbers instead of on a hash map, it looks like&nbsp;this:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="nb">take-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">%</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">drop-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">%</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="p">]))</span>
<span class="c1">; =&gt; (2 3 4 5)</span>
</pre></div>

<p>Which made me wonder, why not do it the other way&nbsp;around:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="nb">drop-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">%</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nb">take-while </span><span class="o">#</span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">%</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">7</span><span class="p">]))</span>
<span class="c1">; =&gt; (2 3 4 5)</span>
</pre></div>

<p>As you can see, the result is the same. I wonder if performance could be a consideration, that you first want to do the operation that reduces the length of the sequence the most. Might be that the next section about lazy sequences sheds some light on&nbsp;that.</p>
<p>Another way to look at this, is from a readability perspective. Conceptually it makes sense&nbsp;to <code>drop-while</code> first to get to the first number you want to keep, then&nbsp;use <code>take-while</code> to stop at the last number of the sequence you need. So reading from left-to-right the second example makes more sense, because you read&nbsp;the <code>drop-while</code> before&nbsp;the <code>take-while</code>. However, reading in order of execution the first example makes more sense for exactly the same&nbsp;reason: <code>drop-while</code> before&nbsp;the <code>take-while</code><sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup>. It was interesting to notice myself making that transition from reading left-to-right to reading in order of execution, and then deciding the example in the book made more sense than the alternative I had come up&nbsp;with.</p>
<p>Finally, these examples&nbsp;with <code>drop-while</code> and <code>take-while</code> made me wonder what data being immutable means for operations like this. That&#8217;s something the book will cover in <a href="https://www.braveclojure.com/functional-programming/">chapter 5</a>.</p>
<h3>Implementing <code>map</code>, <code>filter</code> and <code>some</code> using <code>reduce</code>
</h3>
<p>After&nbsp;explaining <code>reduce</code> the book&nbsp;says:</p>
<blockquote>
<p>The takeaway here is&nbsp;that <code>reduce</code> is a more flexible function than it first appears. Whenever you want to derive a new value from a seqable data&nbsp;structure, <code>reduce</code> will usually be able to do what you need. If you want an exercise that will really blow your hair back, try&nbsp;implementing <code>map</code> using <code>reduce</code>, and then do the same&nbsp;for <code>filter</code> and <code>some</code> after you read about them later in this&nbsp;chapter.</p>
</blockquote>
<p>So I gave that a&nbsp;try.</p>
<h4>
<code>map</code> using <code>reduce</code>
</h4>
<p>For <code>map</code> I wrote the following function, deciding being able to deal with a single collection was&nbsp;sufficient:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="kd">defn </span><span class="nv">my-map</span><span class="w"> </span><span class="p">[</span><span class="nv">func</span><span class="w"> </span><span class="nv">inp</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nb">reduce </span><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">vect</span><span class="w"> </span><span class="nv">number</span><span class="p">]</span>
<span class="w">            </span><span class="p">(</span><span class="nb">concat </span><span class="nv">vect</span><span class="w"> </span><span class="p">[(</span><span class="nf">func</span><span class="w"> </span><span class="nv">number</span><span class="p">)]))</span>
<span class="w">            </span><span class="p">()</span>
<span class="w">            </span><span class="nv">inp</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>

<span class="p">(</span><span class="nf">my-map</span><span class="w"> </span><span class="nb">inc </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">])</span>
<span class="c1">; =&gt; (2 3 4)</span>
<span class="p">(</span><span class="nf">my-map</span><span class="w"> </span><span class="nb">dec </span><span class="p">[</span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="p">])</span>
<span class="c1">; =&gt; (3 4 5)</span>
</pre></div>

<h4>
<code>filter</code> using <code>reduce</code>
</h4>
<p>Implementing <code>filter</code> was quite a struggle. As a starting point I took an example from the book: it turned out that the explanation&nbsp;about <code>reduce</code> already&nbsp;contained <code>filter</code> implemented&nbsp;with <code>reduce</code>. Simplified to work on a vector of numbers instead of on a hash map, it looks like&nbsp;this:</p>
<div class="code"><pre class="code literal-block"><span class="p">(</span><span class="kd">defn </span><span class="nv">my-simple-filter</span><span class="w"> </span><span class="p">[</span><span class="nv">inp</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nb">reduce </span><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">vect</span><span class="w"> </span><span class="nv">numb</span><span class="p">]</span>
<span class="w">            </span><span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">&lt; </span><span class="nv">numb</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">              </span><span class="p">(</span><span class="nb">concat </span><span class="nv">vect</span><span class="w"> </span><span class="p">[</span><span class="nv">numb</span><span class="p">])</span>
<span class="w">              </span><span class="nv">vect</span><span class="p">))</span>
<span class="w">          </span><span class="p">()</span>
<span class="w">          </span><span class="nv">inp</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>

<span class="p">(</span><span class="nf">my-simple-filter</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">])</span>
<span class="nv">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
</pre></div>

<p>What I wanted to do, was to have&nbsp;the <code>(&lt; numb 4)</code> as one of the arguments to&nbsp;a <code>filter-as-reduce</code> function. I tried to do that in numerous different ways, but none of them worked. The function would run, but the output&nbsp;was <code>(1 2 3 4 5)</code> instead&nbsp;of <code>(1 2 3)</code>. My best guess as to why is that my input argument was not executed as a function, but evaluated as&nbsp;truthy.</p>
<p>What I did get to work, was to have the whole function for&nbsp;the <code>reduce</code> as an argument to&nbsp;the <code>filter-as-reduce</code> function. So that&#8217;s close, but not exactly what I set out to do. And I&#8217;m sure it can be done, just not by me right at this&nbsp;moment.</p>
<h4>
<code>some</code> using <code>reduce</code>
</h4>
<p>Finally,&nbsp;for <code>some</code> I decided not to bother, because I started to feel this exercise does not mesh well with the way I&#8217;m working through this book. So I figured&nbsp;that <code>some</code> would be very similar&nbsp;to <code>filter</code>, with the exception that it should not return a collection of values matching the filter, but instead&nbsp;return <code>true</code> on the first match (if any) and else&nbsp;return <code>false</code>.</p>
<h3>Some vim stuff related to&nbsp;macros</h3>
<p>I added the macro I mentioned in <a href="../clj6-three-chapters-in-one-year/">my previous post</a>, to&nbsp;my <code>.vimrc</code> file: <code>let @c='yypc!$gcca =&gt;</code>. The biggest challenge was to figure out how to put&nbsp;an <code>escape</code> in the macro to switch from command mode to insert mode, so that I could type the &#8220;=&gt;&#8221;. The solution turned out to&nbsp;be <code>ctrl+v Esc</code>,&nbsp;where <code>ctrl+v</code> is &#8220;insert next non-digit&nbsp;literally&#8221;.</p>
<p>Another thing I figured out about the macro is that there&#8217;s an issue with indentation. You should run it on the last line of a function to get the result on the line right below the function. However, if that line has indentation, the result has that same indentation. Something to fix some other&nbsp;time&#8230;</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:1">
<p>The book explains this further through linked lists, which I am going to use as an excuse to point you to this excellent article by 
<a href="https://twitter.com/hillelogram">Hillel Wayne</a>: <a href="https://www.hillelwayne.com/post/linked-lists/">Why do interviewers ask linked list questions?</a> <a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
<li id="fn:2">
<p>They&#8217;re also called dunder methods, short for &#8220;double underscore methods&#8221;, because their names start and end with a double underscore. <a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">↩</a></p>
</li>
<li id="fn:3">
<p>The sensible recommendation here would be to&nbsp;have <code>+</code> then do something that is some sort of addition, but I must admit I&#8217;m tempted to recommend doing the opposite. <a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">↩</a></p>
</li>
<li id="fn:4">
<p>Going through my cryptic notes on this from several months ago, it looks like I came to the same conclusion about this as my past self. <a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">↩</a></p>
</li>
</ol>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../categories/brave-clojure/" rel="tag">brave&nbsp;clojure</a></li>
            <li><a class="tag p-category" href="../../../../categories/clojure/" rel="tag">clojure</a></li>
            <li><a class="tag p-category" href="../../../../categories/programming/" rel="tag">programming</a></li>
            <li><a class="tag p-category" href="../../../../categories/python/" rel="tag">python</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../../2021/how-to-run-a-remote-elephant-carpaccio/" rel="prev" title="How to run a remote Elephant Carpaccio">Previous&nbsp;post</a>
            </li>
            <li class="next">
                <a href="../../../2021/site-analytics-if-you-have-two-watches/" rel="next" title="Site analytics: if you have two watches...">Next&nbsp;post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2023 
<a href="https://creativecommons.org/licenses/by/4.0/" rel="nofollow" target="_blank">
<img alt="Creative Commons License" style="border-width:0;margin: 0px 0px 0px 0px" src="https://licensebuttons.net/l/by/4.0/80x15.png"></a>
<a href="mailto:site@joep.slmail.me">Joep Schuurkes</a> - Powered by <a href="https://getnikola.com" rel="nofollow" target="_blank">Nikola</a> - Analytics by <a href="https://plausible.io/" rel="nofollow" target="_blank">Plausible</a>
            
        </footer>
</div>
</div>

        <script src="../../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element){var i=element.getElementsByTagName('img')[0];return i===undefined?'':i.alt;}});
    </script>
</body>
</html>